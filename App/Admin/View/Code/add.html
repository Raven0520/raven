<extend name="Common/index"/>

<block name="tool">
    <a href="{:U('index')}" class="icon icon-view-list" style="font-size: 18px; cursor: pointer; margin-right: 10px"></a>
</block>

<block name="content_1">

    <div class="col-sm-12">

        <div class="nest" id="StackableClose">
            <div class="title-alt">
                <h6>
                    Add {:CONTROLLER_NAME}</h6>
                <div class="titleClose">
                    <a class="gone" href="#tStackableClose">
                        <span class="entypo-cancel"></span>
                    </a>
                </div>
                <div class="titleToggle">
                    <a class="nav-toggle-alt" href="#StackableStatic">
                        <span class="entypo-up-open"></span>
                    </a>
                </div>
            </div>

            <div class="body-nest" id="StackableStatic">

                <form class="form-horizontal" role="form" id="submitForm">
                    <input type="hidden" name="id" id="id">
                    <div class="form-group" style="padding-top: 10px">
                        <label class="col-sm-1 control-label">Title</label>
                        <div class="col-sm-6">
                            <input id="title" name="title" class="form-control" type="text" placeholder="文章名称">
                        </div>
                    </div>

                    <div class="form-group" style="padding-top: 10px">
                        <label class="col-sm-1 control-label">Mark</label>
                        <div class="col-sm-6" id="mark">

                        </div>
                        <a class="icon icon-plus" style="font-size: 20px" onclick="" data-toggle="modal" data-target="#mark-box"></a>
                    </div>

                    <div class="form-group" style="padding-top: 10px">
                        <label class="col-sm-1 control-label">Content</label>
                        <div class="col-sm-8">
                            <textarea id="content" name="content" rows="12">还未编写哦！</textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button onclick="add()" type="button" class="btn btn-default pull-right"><i id="submit_icon" class="fa fa-plus">
                                &nbsp;</i>Submit
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>


    </div>
</block>

<block name="modal-one">
    <div class="modal fade" id="mark-box" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="padding-top: 13%;">
        <div class="modal-dialog" role="document" style="width: 480px;">
            <div class="modal-content" style="background-color: rgba(255,255,255,1); border: none; box-shadow: none;">
                <div class="row" style="margin-top: 25px; min-height: 200px">
                    <div class="col-md-12" style="width: 94%; margin-left: 3%;">
                        <!-- BOX -->
                        <div class="box">
                            <div class="box-title" style="background-color: #FFFFFF; padding-top: 10px;">
                                <h4><i class="fa fa-list"></i>
                                    <span id="action">Add</span><span>&nbsp;</span>Mark
                                </h4>
                            </div>
                            <div class="box-body">
                                <foreach name="marks" item="v" key="k">
                                    <div class="pull-left" style="margin-right: 5px">
                                        <a type="button" class="status-metro status-disabled" status="0" style="border-radius: 5px; cursor: pointer" id="{$k}" onclick="chooseMark('{$k}','{$v}')">{$v}</a>
                                    </div>
                                </foreach>
                                <div></div>
                            </div>
                        </div>
                        <!-- /BOX -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</block>

<block name="script">

    <!-- 配置文件 -->
    <script type="text/javascript" src="/Public/js/ueditor/ueditor.config.js"></script>
    <!-- 编辑器源码文件 -->
    <script type="text/javascript" src="/Public/js/ueditor/ueditor.all.js"></script>
    <!-- 实例化编辑器 -->
    <script type="text/javascript">
        var ue = UE.getEditor('content', {
            //自定义编辑器按钮
            toolbars: [
                ['fullscreen',
                    'source',
                    'undo',
                    'redo',
                    'bold',
                    'italic', //斜体
                    'underline', //下划线
                    'strikethrough', //删除线
                    '|',
                    'insertcode' //代码语言
                ]
            ],
            initialFrameHeight : 320
        });

        //选中标签
        function chooseMark(id,name) {
            var status = $('#' + id).attr('status');
            if (status == 0){
                $('#'+ id).removeClass('status-disabled').addClass('status-add').attr('status',1);
                $("#mark").append("<span style='margin-right: 5px' class='status-metro status-add' id = 'mark-"+ id +"'>"+ name +"</span>");
            }else {
                $('#'+ id).removeClass('status-add').addClass('status-disabled').attr('status',0);
                $("#mark-" + id).remove();
            }
        }
    </script>
</block>